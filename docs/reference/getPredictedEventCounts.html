<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get Predicted Count in a Data Frame — getPredictedEventCounts • CohortDiagnosticsLite</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get Predicted Count in a Data Frame — getPredictedEventCounts"><meta property="og:description" content="This function predicts the count of events in a data frame using Poisson regression models with natural splines. It fits the model using both the Cyclops package and base glm().
The function models event counts based on the field specified in the timeSequenceField parameter and includes an offset for the field specified in personTimeField to account for different exposure times. It evaluates model stability through likelihood ratio tests and other diagnostics.
The function adds flags to indicate model stability and significance, with separate indicators for the results of both Cyclops and glm() fits."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CohortDiagnosticsLite</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/CohortDiagnosticsLite/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get Predicted Count in a Data Frame</h1>
    <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortDiagnosticsLite/blob/HEAD/R/GetPredictedEventCounts.R" class="external-link"><code>R/GetPredictedEventCounts.R</code></a></small>
    <div class="hidden name"><code>getPredictedEventCounts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function predicts the count of events in a data frame using Poisson regression models with natural splines. It fits the model using both the <code>Cyclops</code> package and base <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code>.
The function models event counts based on the field specified in the <code>timeSequenceField</code> parameter and includes an offset for the field specified in <code>personTimeField</code> to account for different exposure times. It evaluates model stability through likelihood ratio tests and other diagnostics.
The function adds flags to indicate model stability and significance, with separate indicators for the results of both <code>Cyclops</code> and <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code> fits.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getPredictedEventCounts</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">timeSequenceField</span>,</span>
<span>  <span class="va">countField</span>,</span>
<span>  <span class="va">personTimeField</span>,</span>
<span>  maxNumberOfSplines <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  splineTickInterval <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  maxRatio <span class="op">=</span> <span class="fl">1.25</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame that contains the columns specified in the function parameters.</p></dd>


<dt id="arg-timesequencefield">timeSequenceField<a class="anchor" aria-label="anchor" href="#arg-timesequencefield"></a></dt>
<dd><p>The field in the data frame that represents the time sequence.</p></dd>


<dt id="arg-countfield">countField<a class="anchor" aria-label="anchor" href="#arg-countfield"></a></dt>
<dd><p>The field in the data frame that represents the count of events.</p></dd>


<dt id="arg-persontimefield">personTimeField<a class="anchor" aria-label="anchor" href="#arg-persontimefield"></a></dt>
<dd><p>The field in the data frame that represents the person time.</p></dd>


<dt id="arg-maxnumberofsplines">maxNumberOfSplines<a class="anchor" aria-label="anchor" href="#arg-maxnumberofsplines"></a></dt>
<dd><p>The maximum number of splines to use in the model. If NULL, the default is 3.</p></dd>


<dt id="arg-splinetickinterval">splineTickInterval<a class="anchor" aria-label="anchor" href="#arg-splinetickinterval"></a></dt>
<dd><p>The interval at which to place the splines. The default is 3.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>The significance level for statistical tests and confidence intervals (default is 0.05).</p></dd>


<dt id="arg-maxratio">maxRatio<a class="anchor" aria-label="anchor" href="#arg-maxratio"></a></dt>
<dd><p>The maximum ratio for the likelihood comparison. If NULL, the default is 1.25.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame with the observed and predicted counts from both <code>Cyclops</code> and <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code>, along with diagnostics such as p-values, confidence intervals (for GLM), and stability indicators.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><strong>Input Data Structure:</strong>
The input <code>data</code> should be a data frame with columns that are dynamically specified via function parameters.</p><ul><li><p>The <code>timeSequenceField</code> parameter represents a column containing the time sequence or index of the events (e.g., date or time intervals).</p></li>
<li><p>The <code>countField</code> parameter refers to the column representing the observed count of events during each time interval.</p></li>
<li><p>The <code>personTimeField</code> parameter points to the column representing the exposure time or population-at-risk during the corresponding time interval.
The <code>data</code> should not contain duplicate rows for the same value in the column specified by <code>timeSequenceField</code>, and both the columns for <code>countField</code> and <code>personTimeField</code> must not contain missing (<code>NA</code>) values.</p></li>
</ul></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gowtham Rao.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

